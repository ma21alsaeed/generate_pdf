<body>
    <h2>Accommodation Services</h2>
    <table>
        <thead>
            <tr>
                <th>Accommodation</th>
                <th>Price</th>
                <th>Check-In</th>
                <th>Check-Out</th>
                <th>Nights</th>
                <th>Accommodation Name</th>
                <th>Room Type/Organization</th>
            </tr>
        </thead>
        <tbody>
            <% accommodation.forEach((service, index) => { %>
                <tr>
                    <td><%= service.Name %></td>
                    <td><%= service.Price ? service.Price : 'N/A' %></td>
                    <td><%= new Date(service.CheckInDate).toLocaleString() %></td>
                    <td><%= new Date(service.CheckOutDate).toLocaleString() %></td>
                    <td><%= service.Nights %></td>
                    <td><%= service.AccommodationName %></td>
                    <td>
                        <% if (service.RoomDetails && service.RoomDetails.Images_Link) { %>
                            <a href="<%= service.RoomDetails.Images_Link %>"><%= service.RoomDetails.Room_Type %></a>
                        <% } else if (service.RentalHomeDetails && service.RentalHomeDetails.Images_Link) { %>
                            <a href="<%= service.RentalHomeDetails.Images_Link %>"><%= service.RentalHomeDetails.Room_Organization %></a>
                        <% } else { %>
                            <%= service.RoomDetails ? service.RoomDetails.Room_Type : service.RentalHomeDetails.Room_Organization %>
                        <% } %>
                    </td>
                </tr>
            <% }); %>
        </tbody>
    </table>

    <h2>Flight Services</h2>
    <table>
        <thead>
            <tr>
                <th>Flight</th>
                <th>Ticket Price</th>
                <th>Price</th>
                <th>Departure</th>
                <th>Arrival</th>
            </tr>
        </thead>
        <tbody>
            <% flights.forEach((service, index) => { %>
                <tr>
                    <td><%= service.Name %></td>
                    <td><%= service.TicketPrice %></td>
                    <td><%= service.Price %></td>
                    <td><%= new Date(service.DepartureDate).toLocaleString() %></td>
                    <td><%= new Date(service.ArrivalDate).toLocaleString() %></td>
                </tr>
            <% }); %>
        </tbody>
    </table>

    <h2>Transportation Services</h2>
    <table>
        <thead>
            <tr>
                <th>Transportation</th>
                <th>Price</th>
                <th>Departure</th>
                <th>Return</th>
            </tr>
        </thead>
        <tbody>
            <% transportation.forEach((service, index) => { %>
                <tr>
                    <td><%= service.Name %></td>
                    <td><%= service.Price %></td>
                    <td><%= new Date(service.Departure_Date).toLocaleString() %></td>
                    <td><%= new Date(service.Return_Date).toLocaleString() %></td>
                </tr>
            <% }); %>
        </tbody>
    </table>

    <h2>Terms and Conditions</h2>
    <div class="terms-section">
        <% terms.forEach(term => { %>
            <div>
                <h3 style="color: #2ecc71;"><%= term.company %></h3>
                <div>
                    <%- term.cancelation_policy %>
                </div>
            </div>
        <% }); %>
    </div>
</body>
